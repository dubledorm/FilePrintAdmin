# README

## Назначение
Административная оболочка для сервиса DataToDocument (формирование внешнего вида отчётов на основаниии 
шаблона и переданных данных)

Умеет:
1. Сохранить новый шаблон в виде html (для создания pdf документов) или xls (для Excel документов)
2. Указать набор параметров, определяющих внешний вид отчёта
3. Автоматически достать из шаблона список тегов подстановки и сохранить их в БД (обращается к сервису data_to_document)
4. Указать пример передаваемых данных (чем заполняем теги подстановки)
5. Вызвать сервис data_to_document и сформировать отчёт на основании шаблона и примера передаваемых данных (удобно для отладки)
6. Скачать сохранённый шаблон

## Для Devops
* Для работы требуется БД Monga, общая с сервисом DataToDocument
* Шаблоны отчётов хранятся в Монго, в коллекции Templates
* При старте проверяет переменные окружения и коннект к БД. Не запустится если их нет. Выведет ошибку.
* Проверяет также, что доступен сервис data_to_document. Но запустится если его не найдёт. Только предупреждение выведет. Сделано так, чтобы не зависеть от очередности запуска.

### Настроечные параметры
Требуется установка следующих переменных окружения:

* DB_MONGO_HOST='адрес_или_имя_сервера_mongo:порт'
* DB_MONGO_DATABASE_NAME='Имя базы данных'
* DATA_TO_DOCUMENT_URL='URL сервиса data_to_document'


### Первоначальное развёртывание
1. На сервере БД создать БД
2. Установить переменные окружения, запустить контейнер.

Всё, все остальные коллекции будут создаваться в БД по мере работы сервиса
